# Copyright 2011-2012 Mike Kazantsev
# Distributed under the terms of the GNU General Public License v2

SUMMARY="Node.js is an event-driven I/O framework for the V8 JavaScript engine on Unix-like platforms."

HOMEPAGE="http://nodejs.org/"
DOWNLOADS="http://nodejs.org/dist/v${PV}/${PN}-v${PV}.tar.gz"

LICENCES="as-is"
SLOT="0"
PLATFORMS="~amd64 ~x86"
MYOPTIONS=""

DEPENDENCIES="
    build:
        dev-lang/python
    build+run:
        dev-libs/libev
        net-dns/c-ares
"

BUGS_TO="mk.fraggod@gmail.com"


WORK=${WORKBASE}/${PN}-v${PV}

src_configure() {
    # It's a creepy mix of waf and it's own js crap, not autotools
    edo ./configure --prefix=/usr --shared-cares --destdir="$IMAGE"
}

src_install() {
    default
    find "$IMAGE" -xdev -type d -empty -delete
}
