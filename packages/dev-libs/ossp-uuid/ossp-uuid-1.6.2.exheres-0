# Copyright 2011 Mike Kazantsev
# Distributed under the terms of the GNU General Public License v2

MY_PNV="uuid-${PV}"

requires multilib

SUMMARY="An ISO-C:1999 API and corresponding CLI for
    the generation of DCE 1.1, ISO/IEC 11578:1996 and RFC 4122 compliant UUID."

HOMEPAGE="http://www.ossp.org/pkg/lib/uuid/"
DOWNLOADS="ftp://ftp.ossp.org/pkg/lib/uuid/${MY_PNV}.tar.gz"

LICENCES="as-is"
SLOT="0"
PLATFORMS="~amd64 ~x86"
MYOPTIONS=""

DEPENDENCIES=""

BUGS_TO="mk.fraggod@gmail.com"


WORK="${WORKBASE}/${MY_PNV}"
DEFAULT_SRC_PREPARE_PATCHES=( "${FILES}/1.6.2-gentoo.patch" )

# Notes:
# * collides with e2fstools libs and includes if not moved around
# * perl-bindings are broken
# * pgsql-bindings need PostgreSQL-sources and are included since PostgreSQL 8.3
DEFAULT_SRC_CONFIGURE_PARAMS=(
    --includedir=/usr/include/ossp
    --with-dce
    --without-pgsql
    --without-perl
    --without-php
    --with-cxx )

src_install() {
    default

    mv "${IMAGE}/usr/$(get_libdir)/pkgconfig"/{,ossp-}uuid.pc
    mv "${IMAGE}/usr/share/man/man3"/uuid.3{,ossp}
    mv "${IMAGE}/usr/share/man/man3"/uuid++.3{,ossp}
}
