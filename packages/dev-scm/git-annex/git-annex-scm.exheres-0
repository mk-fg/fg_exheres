# Copyright 2011 Mike Kazantsev
# Distributed under the terms of the GNU General Public License v2

SCM_REPOSITORY="git://git.kitenet.net/git-annex"

require haskell scm-git

SUMMARY="git-annex allows managing files with git, without checking the file contents into git."

HOMEPAGE="http://git-annex.branchable.com/"

LICENCES="GPL-3"
SLOT="0"
PLATFORMS="~amd64 ~x86"
MYOPTIONS=""

DEPENDENCIES="
    $(haskell_lib_dependencies "
        dev-haskell/HTTP
        dev-haskell/MissingH
        dev-haskell/QuickCheck
        dev-haskell/SHA
        dev-haskell/dataenc
        dev-haskell/json
        dev-haskell/monad-control
        dev-haskell/pcre-light
        dev-haskell/utf8-string")
    build+run:
        sys-apps/util-linux
        sys-apps/findutils
    suggestion:
        net-misc/rsync [[ description = [ for resume/partial file transfer support ] ]]
"

BUGS_TO="mk.fraggod@gmail.com"


src_compile() {
    make -j1
}

src_install() {
    default
    find "${IMAGE}/usr/share/doc" -depth -type d -empty -delete
}
